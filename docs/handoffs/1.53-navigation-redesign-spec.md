# 1.53 Navigation Redesign Spec

## Session Summary

This was a **UX design session** - no code was written. The session focused on conceptualizing a major navigation restructure for both the Today screen and Appointment detail screen.

## What Was Designed

### Current Architecture (Before)

**Today Screen:**
```
┌────────┬────────────────┬────────────────────────────────────┐
│Sidebar │  PatientCards  │  Topbar (date nav + search)        │
│        │                ├────────────────────────────────────│
│        │                │  Timeline                          │
└────────┴────────────────┴────────────────────────────────────┘
```

**Appointment Screen:**
```
┌────────┬────────────────┬────────────────────────────────────┐
│Sidebar │  PatientCards  │  Topbar (back btn + search)        │
│        │                ├──────────┬─────────────────────────│
│        │                │VisitHist │ TopTabBar + SOAP/Tabs   │
└────────┴────────────────┴──────────┴─────────────────────────┘
```

### New Architecture (Proposed)

**Today Screen:**
```
┌────────┬────────────────┬────────────────────────────────────┐
│        │ Date header    │  Topbar                            │
│Sidebar │ (dropdown)     │  Today's Date + Week Selector      │
│        ├────────────────┼────────────────────────────────────│
│        │ PatientCards   │  Timeline                          │
│        │                │                                    │
└────────┴────────────────┴────────────────────────────────────┘
```

**Appointment Screen:**
```
┌────────┬────────────────┬─────────────────────────────────────────────┐
│        │ Date header    │              TopBar                         │
│Sidebar │ (dropdown)     │  ┌─────────────────┬───────────────────────┐│
│        ├────────────────┤  │  VisitContext   │     TopTabBar         ││
│        │                │  │  - Patient Name │  Chart|Billing|Sched  ││
│        │ PatientCards   │  │  - Date & Time  │                       ││
│        │                │  │  - Status       │                       ││
│        │                │  └─────────────────┴───────────────────────┘│
│        │                ├───────────┬───────────────────────────────────
│        │                │  Visit    │     Appointment Content         │
│        │                │ Timeline  │  ┌─────────────┬───────────────┐│
│        │                │           │  │ MainContent │    Context    ││
│        │                │           │  │ (SOAP/Tabs) │               ││
│        │                │           │  └─────────────┴───────────────┘│
└────────┴────────────────┴───────────┴─────────────────────────────────┘
```

### Key Changes

1. **PatientCards gets a date header** - Shows which date the cards represent, with dropdown to change dates
2. **Topbar simplified on appointment screen** - No longer shows back button and date navigation
3. **New VisitContext component** - Contains Patient Name + Appointment Date/Time + Status slider
4. **TopTabBar moves to right of VisitContext** - Tabs (Chart, Billing, Schedule, Comm) plus optional search

### New Component: VisitContext

```
┌─────────────────────────────────────────┐
│  ┌────┐  ● Maria Thompson               │  ← Avatar + Status dot + Name
│  │ MT │    Dec 18 · 10:00 AM            │  ← Date + Time
│  └────┘    ◀ In Progress ▶              │  ← Status slider
└─────────────────────────────────────────┘
```

This component:
- Shows patient avatar and name
- Shows appointment date and time (solves "where does the date live?" question)
- Contains status slider for advancing workflow

### Component Hierarchy (Appointment Screen)

```
/appointment/[id]
├── Sidebar (48px)
├── PatientCards (~200px)
│   ├── DateHeader ("Dec 18 Today ▼")
│   └── StatusGroups (IN PROGRESS, CHECKED IN, etc.)
└── MainArea (flex-1)
    ├── TopBar (56px)
    │   ├── VisitContext (~240px)
    │   │   ├── Avatar
    │   │   ├── PatientName + StatusDot
    │   │   ├── DateTime
    │   │   └── StatusSlider
    │   └── TopTabBar (flex-1)
    │       └── Tabs (Chart | Billing | Schedule | Comm)
    └── ContentArea (flex-1)
        ├── VisitTimeline (~160px)
        └── AppointmentContent (flex-1)
            ├── MainContent (flex-1)
            └── Context (~280px)
```

## Files That Will Need Changes

| File | Changes Needed |
|------|----------------|
| `src/components/custom/Topbar.tsx` | Remove appointment-specific logic, simplify |
| `src/components/custom/PatientCards.tsx` | Add date header with dropdown |
| `src/app/appointments/[id]/page.tsx` | New layout structure |
| `src/app/appointments/[id]/components/TopTabBar.tsx` | Refactor to work with VisitContext |
| **NEW** `src/app/appointments/[id]/components/VisitContext.tsx` | Patient name + date + status |
| `src/components/custom/TodayScreen.tsx` | Update to match new Topbar behavior |

## Design Decisions

1. **Date lives in two places**: PatientCards header (context) + VisitContext (specific appointment)
2. **VisitContext owns status slider** - Previously was in TopTabBar
3. **Topbar becomes simpler** - Just date navigation on Today, minimal on appointment
4. **PatientCards can show date dropdown** - Allows changing context without going back

## Current State

- This is a **specification only** - no code changes made
- Wireframes and component hierarchy documented
- Ready for implementation

## Next Session Assignment

See `docs/prompts/sessions/1.54-navigation-restructure.md` for implementation instructions.
