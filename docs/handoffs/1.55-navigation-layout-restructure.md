# 1.55 Navigation & Layout Restructure

## Session Summary

Major navigation and layout restructuring session. Simplified the top bar to search-only, expanded the sidebar to show labels, and reorganized panel layouts on both the Today screen and Appointment detail page.

## What Was Built/Changed

### 1. TimelineHeader Simplified
- Removed date display from TimelineHeader - now contains only the search button
- Changed background from `bg-sidebar` to `bg-background` (white)
- Date info moved to be displayed within the page layouts themselves

### 2. Sidebar Expanded
- Changed from collapsed icon-only (`w-12`) to expanded with labels (`w-48`)
- Shows "Acuflow" brand name next to logo
- Nav items show icon + label side by side
- Footer shows practitioner avatar + name + credentials
- Removed tooltips (no longer needed with visible labels)

### 3. Today Screen (`/`) Layout Restructure
- Search header (full width)
- Date header (full width) - "Today, Thursday, December 18"
- Content area: Timeline (left) | PatientCards (right)

### 4. Appointment Detail Page (`/appointments/[id]`) Layout Restructure
- Search header (full width)
- Patient header with step indicator (full width) - avatar, name, demographics, status controls
- Content area: Visit History + SOAP (left) | Patient Context (right)
- PatientCards panel removed from this page

### 5. Calendar & Settings Pages
- Added TimelineHeader with search button
- Consistent top bar across all pages

### 6. Visit Timeline Cards Restyled
- Changed from left-border shadow to rounded corners with outline border
- Added `mx-3 my-1` margins for spacing
- Selected/editing states use border-2 with color tinting

### 7. PatientCards Background
- Changed from `bg-sidebar` to `bg-background` (white)

### 8. HeaderContext Updates
- Added `isViewingTodayAppointment` flag for sidebar highlighting
- Sidebar "Today" nav item stays highlighted when viewing today's appointments

## Key Files Modified

| File | Changes |
|------|---------|
| `src/components/custom/TimelineHeader.tsx` | Search-only, white background |
| `src/components/custom/Sidebar.tsx` | Expanded with labels, removed tooltips |
| `src/components/custom/TodayScreen.tsx` | New layout: Timeline left, PatientCards right |
| `src/components/custom/Timeline.tsx` | Added `hideDateHeader` prop |
| `src/components/custom/PatientCards.tsx` | White background |
| `src/app/appointments/[id]/page.tsx` | Removed PatientCards, restructured layout |
| `src/app/appointments/[id]/components/VisitTimeline.tsx` | Rounded cards with border |
| `src/app/calendar/page.tsx` | Added TimelineHeader |
| `src/app/settings/page.tsx` | Added TimelineHeader |
| `src/contexts/HeaderContext.tsx` | Added `isViewingTodayAppointment` |

## Current State

### Working
- All pages have consistent search-only top bar
- Sidebar is always expanded with labels
- Today screen shows Timeline | PatientCards layout
- Appointment page shows Visit History + SOAP | Patient Context layout
- Navigation highlighting works correctly

### Pending Work - Tab System
User requested replacing the step indicator (dots with lines) with a proper tab system:
- **Tabs**: Medical, Billing, Scheduling, Messaging
- **Position**: Center of patient header, vertically aligned with other elements
- **Style**:
  - All tabs same width, no gaps between them
  - No visible borders on tabs themselves
  - Active tab has colored underline on top of header's bottom border
  - Text only, no outer border

**Design spec** (from user):
```
                    ┌──────────┬──────────┬──────────┬──────────┐
                    │  Medical │  Billing │Scheduling│Messaging │  ← no outer border
                    └──────────┴──────────┴──────────┴──────────┘
                    ══════════                                     ← colored underline
                                                                     only on active tab
```

## Architecture Notes

### Layout Structure

**TodayScreen:**
```
┌─────────────────────────────────────────┐
│ TimelineHeader (search)                 │
├─────────────────────────────────────────┤
│ Date Header                             │
├───────────────────────┬─────────────────┤
│ Timeline              │ PatientCards    │
│                       │                 │
└───────────────────────┴─────────────────┘
```

**Appointment Page:**
```
┌─────────────────────────────────────────┐
│ TimelineHeader (search)                 │
├─────────────────────────────────────────┤
│ Patient Header (with tabs in center)    │
├──────────┬──────────────────┬───────────┤
│ Visit    │ SOAP Notes       │ Patient   │
│ History  │                  │ Context   │
└──────────┴──────────────────┴───────────┘
```

## Session Date
December 19, 2024
